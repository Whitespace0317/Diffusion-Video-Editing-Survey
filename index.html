<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Diffusion 影片編輯 User Study 問卷調查</title>
    <link href="style.css" rel="stylesheet" />
    <link href="manual.css" rel="stylesheet" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Diffusion 影片編輯 User Study 問卷調查</h1>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <p>
          第 <span id="currentQuestion">-</span> 題 / 總共
          <span id="totalQuestions">-</span> 題
        </p>
      </div>

      <div class="manual" id="manual">
        <div class="modal">
          <div class="modal-header">
            <h1>
              <span class="emoji">🎬</span> 歡迎參與 Diffusion 影片編輯問卷調查
            </h1>
            <p>請仔細閱讀下列本問卷的操作方式</p>
          </div>

          <div class="modal-body">
            <div class="survey-goal">
              <h3>問卷目的：</h3>
              <p>本研究旨在評估不同影片編輯技術的效果。</p>
              <p>
                您將觀看多組影片並根據三個標準進行評估：<span class="highlight"
                  >視覺連續性、文本指示符合度和整體編輯效果</span
                >。
              </p>
            </div>

            <div class="instructions">
              <h3><span class="emoji">📝</span> 操作說明</h3>
              <div class="instruction-list">
                <div class="instruction-item">
                  <span>控制輸入影片，所有編輯影片會同步跟隨</span>
                </div>
                <div class="instruction-item">
                  <span>使用撥放速度選項調整觀看速度</span>
                </div>
                <div class="instruction-item">
                  <span>每個問題需要選出第一名和第二名，不可選擇相同影片</span>
                </div>
                <div class="instruction-item">
                  <span>所有選項必須填寫完整才能進入下一題</span>
                </div>
              </div>
            </div>

            <div class="video-section">
              <h3><span class="emoji">🎥</span> 操作示範</h3>
              <div class="video-grid">
                <div class="video-placeholder">
                  <video autoplay loop muted>
                    <source src="tutorial_video/video_control.mp4" type="video/mp4" />
                    您的瀏覽器不支援影片播放
                  </video>
                  <div class="video-label">
                    控制輸入影片，所有編輯影片會同步跟隨
                  </div>
                </div>
                <div class="video-placeholder">
                  <video autoplay loop muted>
                    <source src="tutorial_video/speed_control.mp4" type="video/mp4" />
                    您的瀏覽器不支援影片播放
                  </video>
                  <div class="video-label">使用撥放速度選項調整觀看速度</div>
                </div>
                <div class="video-placeholder">
                  <video autoplay loop muted>
                    <source src="tutorial_video/select_answer.mp4" type="video/mp4" />
                    您的瀏覽器不支援影片播放
                  </video>
                  <div class="video-label">
                    每個問題需要選出第一名和第二名，不可選擇相同影片
                  </div>
                </div>
                <div class="video-placeholder">
                  <video autoplay loop muted>
                    <source src="tutorial_video/next_question.mp4" type="video/mp4" />
                    您的瀏覽器不支援影片播放
                  </video>
                  <div class="video-label">
                    所有選項必須填寫完整才能進入下一題
                  </div>
                </div>
              </div>
            </div>

            <div class="warning-box">
              <h4><span class="emoji">⚠️</span> 重要提醒</h4>
              <p>
                請務必仔細觀看每個影片的完整內容後再進行評分，建議使用較慢的撥放速度(x0.25或x0.5)來觀察變化。</br>問卷資料會自動保存，直到完成問卷並寄送前，您可以隨時返回上一題修改答案。
              </p>
            </div>
          </div>
          <div class="modal-footer">
            <button class="start-button" onclick="closeModal()">
              <span class="emoji">🚀</span> 開始問卷
            </button>
          </div>
        </div>
      </div>

      <div id="surveyContent">
        <div class="question-section">
          <div class="question-title">
            文本指示(Prompt):
            <span id="promptText">-</span>
          </div>

          <div class="video-container" id="video-container">
            <div class="video-item">
              <div class="video-label">輸入影片</div>
              <video id="sourceVideo" controls autoplay loop muted>
                <source src="" type="video/mp4" />
                您的瀏覽器不支援影片播放
              </video>
            </div>
            <div class="video-item">
              <div class="video-label">影片一</div>
              <video
                id="video1"
                title="拖動輸入影片的時間軸或是暫停與開始，皆會同步至編輯影片!"
                controls
                autoplay
                loop
                muted
              >
                <source src="" type="video/mp4" />
                您的瀏覽器不支援影片播放
              </video>
            </div>
            <div class="video-item">
              <div class="video-label">影片二</div>
              <video
                id="video2"
                title="拖動輸入影片的時間軸或是暫停與開始，皆會同步至編輯影片!"
                controls
                autoplay
                loop
                muted
              >
                <source src="" type="video/mp4" />
                您的瀏覽器不支援影片播放
              </video>
            </div>
            <div class="video-item">
              <div class="video-label">影片三</div>
              <video
                id="video3"
                title="拖動輸入影片的時間軸或是暫停與開始，皆會同步至編輯影片!"
                controls
                autoplay
                loop
                muted
              >
                <source src="" type="video/mp4" />
                您的瀏覽器不支援影片播放
              </video>
            </div>
            <div class="video-item">
              <div class="video-label">影片四</div>
              <video
                id="video4"
                title="拖動輸入影片的時間軸或是暫停與開始，皆會同步至編輯影片!"
                controls
                autoplay
                loop
                muted
              >
                <source src="" type="video/mp4" />
                您的瀏覽器不支援影片播放
              </video>
            </div>
          </div>

          <div class="speed-control">
            <strong>影片播放速度：</strong>
            <div class="speed-options">
              <div class="speed-option">
                <input
                  type="radio"
                  name="playbackSpeed"
                  value="0.25"
                  id="speed025"
                  checked
                />
                <label for="speed025">x 0.25</label>
              </div>
              <div class="speed-option">
                <input
                  type="radio"
                  name="playbackSpeed"
                  value="0.5"
                  id="speed05"
                />
                <label for="speed05">x 0.5</label>
              </div>
              <div class="speed-option">
                <input
                  type="radio"
                  name="playbackSpeed"
                  value="1.0"
                  id="speed10"
                />
                <label for="speed10">x 1.0</label>
              </div>
            </div>
          </div>

          <!-- Question 1: Visual Continuity -->
          <div class="choice-section" id="question1">
            <h3>請選擇編輯影片中"視覺上連續性"最佳的兩部編輯影片：</h3>
            <p>可以觀察畫面的前景、背景、主要物件、影片周圍等，是否出現閃爍情形判斷影片的連續性好壞。</p>
            <table class="choice-table">
              <tr>
                <th></th>
                <th>影片一</th>
                <th>影片二</th>
                <th>影片三</th>
                <th>影片四</th>
              </tr>
              <tr>
                <td>第一名</td>
                <td>
                  <input
                    type="radio"
                    name="tc_first"
                    value="video1"
                    class="radio-option"
                  />
                </td>
                <td>
                  <input
                    type="radio"
                    name="tc_first"
                    value="video2"
                    class="radio-option"
                  />
                </td>
                <td>
                  <input
                    type="radio"
                    name="tc_first"
                    value="video3"
                    class="radio-option"
                  />
                </td>
                <td>
                  <input
                    type="radio"
                    name="tc_first"
                    value="video4"
                    class="radio-option"
                  />
                </td>
              </tr>
              <tr>
                <td>第二名</td>
                <td>
                  <input
                    type="radio"
                    name="tc_second"
                    value="video1"
                    class="radio-option"
                  />
                </td>
                <td>
                  <input
                    type="radio"
                    name="tc_second"
                    value="video2"
                    class="radio-option"
                  />
                </td>
                <td>
                  <input
                    type="radio"
                    name="tc_second"
                    value="video3"
                    class="radio-option"
                  />
                </td>
                <td>
                  <input
                    type="radio"
                    name="tc_second"
                    value="video4"
                    class="radio-option"
                  />
                </td>
              </tr>
            </table>
          </div>

          <!-- Question 2: Prompt Alignment -->
          <div class="choice-section" id="question2">
            <h3>請選擇編輯影片中與"文本指示(Prompt)"最符合的兩部編輯影片：</h3>
            <p>在問題頁面上方提供的編輯文字訊息，評選出單張影像中最符合描述的結果，或是參考右邊所提供之風格參考影像選出符合風格的結果。</p>
            <div style="display: flex; gap: 20px; align-items: flex-start">
              <div style="flex: 1">
                <table class="choice-table">
                  <tr>
                    <th></th>
                    <th>影片一</th>
                    <th>影片二</th>
                    <th>影片三</th>
                    <th>影片四</th>
                  </tr>
                  <tr>
                    <td>第一名</td>
                    <td>
                      <input
                        type="radio"
                        name="ta_first"
                        value="video1"
                        class="radio-option"
                      />
                    </td>
                    <td>
                      <input
                        type="radio"
                        name="ta_first"
                        value="video2"
                        class="radio-option"
                      />
                    </td>
                    <td>
                      <input
                        type="radio"
                        name="ta_first"
                        value="video3"
                        class="radio-option"
                      />
                    </td>
                    <td>
                      <input
                        type="radio"
                        name="ta_first"
                        value="video4"
                        class="radio-option"
                      />
                    </td>
                  </tr>
                  <tr>
                    <td>第二名</td>
                    <td>
                      <input
                        type="radio"
                        name="ta_second"
                        value="video1"
                        class="radio-option"
                      />
                    </td>
                    <td>
                      <input
                        type="radio"
                        name="ta_second"
                        value="video2"
                        class="radio-option"
                      />
                    </td>
                    <td>
                      <input
                        type="radio"
                        name="ta_second"
                        value="video3"
                        class="radio-option"
                      />
                    </td>
                    <td>
                      <input
                        type="radio"
                        name="ta_second"
                        value="video4"
                        class="radio-option"
                      />
                    </td>
                  </tr>
                </table>
              </div>
              <div class="style-reference">
                <strong>風格參考</strong>
                <br />
                <img
                  id="styleReference"
                  src=""
                  alt="風格參考圖片"
                  style="display: none"
                />
                <div id="noStyleRef" style="color: #999; font-style: italic">
                  此題無風格參考圖片
                </div>
              </div>
            </div>
          </div>

          <!-- Question 3: Overall Effect -->
          <div class="choice-section" id="question3">
            <h3>請綜合考量連續性與風格匹配度選出您認為"編輯效果"最好的兩部編輯影片：</h3>
            <p>在上述所有方法的編輯結果中，如果是您使用影片編輯的模型對輸入影片進行編輯，哪部編輯影片會是你最期望得到的編輯結果。</p>
            <table class="choice-table">
              <tr>
                <th></th>
                <th>影片一</th>
                <th>影片二</th>
                <th>影片三</th>
                <th>影片四</th>
              </tr>
              <tr>
                <td>第一名</td>
                <td>
                  <input
                    type="radio"
                    name="ge_first"
                    value="video1"
                    class="radio-option"
                  />
                </td>
                <td>
                  <input
                    type="radio"
                    name="ge_first"
                    value="video2"
                    class="radio-option"
                  />
                </td>
                <td>
                  <input
                    type="radio"
                    name="ge_first"
                    value="video3"
                    class="radio-option"
                  />
                </td>
                <td>
                  <input
                    type="radio"
                    name="ge_first"
                    value="video4"
                    class="radio-option"
                  />
                </td>
              </tr>
              <tr>
                <td>第二名</td>
                <td>
                  <input
                    type="radio"
                    name="ge_second"
                    value="video1"
                    class="radio-option"
                  />
                </td>
                <td>
                  <input
                    type="radio"
                    name="ge_second"
                    value="video2"
                    class="radio-option"
                  />
                </td>
                <td>
                  <input
                    type="radio"
                    name="ge_second"
                    value="video3"
                    class="radio-option"
                  />
                </td>
                <td>
                  <input
                    type="radio"
                    name="ge_second"
                    value="video4"
                    class="radio-option"
                  />
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <div class="navigation">
        <button
          class="nav-button"
          id="prevBtn"
          onclick="previousQuestion()"
          disabled
        >
          上一題
        </button>
        <button class="nav-button" id="nextBtn" onclick="nextQuestion()">
          下一題
        </button>
      </div>
    </div>

    <script type="module" src="supabaseClient.js"></script>
    <script src="script.js"></script>
  </body>
</html>
